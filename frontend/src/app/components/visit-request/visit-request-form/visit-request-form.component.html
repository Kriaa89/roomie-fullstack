<div class="visit-form-container">
  <div class="form-header">
    <h2>Request a Visit</h2>
    <p *ngIf="propertyId">You're requesting a visit to a property.</p>
    <p *ngIf="roommateHostId">You're requesting a visit to meet a potential roommate.</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Success Message -->
  <div *ngIf="success" class="success-message">
    {{ success }}
  </div>

  <form [formGroup]="visitForm" (ngSubmit)="onSubmit()" *ngIf="!success">
    <div class="form-group">
      <label for="requestDate">Preferred Date</label>
      <input
        type="date"
        id="requestDate"
        formControlName="requestDate"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['requestDate'].errors }"
      >
      <div *ngIf="submitted && f['requestDate'].errors" class="invalid-feedback">
        <div *ngIf="f['requestDate'].errors['required']">Date is required</div>
      </div>
    </div>

    <div class="form-group">
      <label for="requestTime">Preferred Time</label>
      <input
        type="time"
        id="requestTime"
        formControlName="requestTime"
        class="form-control"
        [ngClass]="{ 'is-invalid': submitted && f['requestTime'].errors }"
      >
      <div *ngIf="submitted && f['requestTime'].errors" class="invalid-feedback">
        <div *ngIf="f['requestTime'].errors['required']">Time is required</div>
      </div>
    </div>

    <div class="form-group">
      <label for="message">Message (Optional)</label>
      <textarea
        id="message"
        formControlName="message"
        class="form-control"
        rows="4"
        placeholder="Add any additional information or questions you have..."
      ></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary" [disabled]="loading">
        <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
        Submit Request
      </button>
      <a routerLink="/renter/visits" class="btn-secondary">Cancel</a>
    </div>
  </form>
</div>
