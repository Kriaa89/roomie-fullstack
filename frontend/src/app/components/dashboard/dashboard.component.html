<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="logo">
      <h1>Roomie</h1>
    </div>
    <div class="user-info" *ngIf="user">
      <span>Welcome, {{ user.firstName }} {{ user.lastName }}</span>
      <button class="btn btn-outline" (click)="logout()">Logout</button>
    </div>
  </header>

  <div class="dashboard-content">
    <div class="sidebar">
      <div class="user-roles" *ngIf="user && user.roles">
        <h3>Your Roles</h3>
        <ul class="roles-list">
          <li *ngFor="let role of user.roles" class="role-badge">{{ role }}</li>
        </ul>
      </div>

      <nav class="dashboard-nav">
        <h3>Navigation</h3>
        <ul>
          <li><a routerLink="/dashboard" class="active">Dashboard</a></li>
          <li *ngIf="hasRole('OWNER')"><a routerLink="/my-properties">My Properties</a></li>
          <li *ngIf="hasRole('RENTER')"><a routerLink="/properties/available">Available Properties</a></li>
          <li *ngIf="hasRole('ROOMMATE_HOST')"><a routerLink="/roommates">Roommates</a></li>
          <li><a routerLink="/profile">My Profile</a></li>
        </ul>
      </nav>
    </div>

    <main class="main-content">
      <div class="actions-bar">
        <h2>Properties</h2>
        <div class="actions">
          <button *ngIf="hasRole('OWNER')" class="btn btn-primary" (click)="createProperty()">
            <i class="fas fa-plus"></i> Add Property
          </button>
          <button *ngIf="hasRole('OWNER')" class="btn btn-secondary" (click)="viewMyProperties()">
            <i class="fas fa-list"></i> My Properties
          </button>
        </div>
      </div>

      <div *ngIf="isLoading" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading properties...</p>
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>

      <div *ngIf="!isLoading && properties.length === 0" class="no-data">
        <p>No properties available at the moment.</p>
        <button *ngIf="hasRole('OWNER')" class="btn btn-primary" (click)="createProperty()">
          Add Your First Property
        </button>
      </div>

      <div *ngIf="!isLoading && properties.length > 0" class="properties-grid">
        <div *ngFor="let property of properties" class="property-card" (click)="viewProperty(property.id)">
          <div class="property-image">
            <img [src]="property.images ? property.images.split(',')[0] : 'assets/placeholder.jpg'" alt="{{ property.name }}">
            <div class="property-badge" *ngIf="property.availability">Available</div>
          </div>
          <div class="property-details">
            <h3>{{ property.name }}</h3>
            <p class="property-location">
              <i class="fas fa-map-marker-alt"></i> {{ property.location }}
            </p>
            <p class="property-price">{{ property.price }}</p>
            <div class="property-info">
              <span><i class="fas fa-bed"></i> {{ property.numberOfBedrooms }} Beds</span>
              <span><i class="fas fa-bath"></i> {{ property.numberOfBathrooms }} Baths</span>
              <span><i class="fas fa-ruler-combined"></i> {{ property.surface }}</span>
            </div>
            <p class="property-description">{{ property.description | slice:0:100 }}{{ property.description.length > 100 ? '...' : '' }}</p>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
