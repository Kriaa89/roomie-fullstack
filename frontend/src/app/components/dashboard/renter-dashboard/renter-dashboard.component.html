<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Renter Dashboard</h1>
    <p *ngIf="currentUser">Welcome, {{ currentUser.firstName }} {{ currentUser.lastName }}</p>
  </div>

  <!-- User Profile Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>My Profile</h2>
      <a routerLink="/renter/profile" class="btn btn-primary">Edit Profile</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.user" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading profile...</p>
      </div>

      <div *ngIf="error.user" class="error-message">
        {{ error.user }}
      </div>

      <div *ngIf="!loading.user && !error.user && currentUser" class="profile-card">
        <div class="profile-image">
          <img [src]="currentUser.profilePicture || 'assets/images/default-profile.png'" alt="Profile Picture">
        </div>
        <div class="profile-details">
          <h3>{{ currentUser.firstName }} {{ currentUser.lastName }}</h3>
          <p><strong>Email:</strong> {{ currentUser.email }}</p>
          <p><strong>Phone:</strong> {{ currentUser.phoneNumber }}</p>
          <p><strong>Location:</strong> {{ currentUser.location }}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Available Properties Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>Available Properties</h2>
      <a routerLink="/renter/properties" class="btn btn-primary">Find Properties</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.properties" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading properties...</p>
      </div>

      <div *ngIf="error.properties" class="error-message">
        {{ error.properties }}
      </div>

      <div *ngIf="!loading.properties && !error.properties" class="cards-container">
        <div *ngIf="availableProperties.length === 0" class="empty-state">
          <p>No properties available at the moment. Check back later!</p>
        </div>

        <div *ngFor="let property of availableProperties.slice(0, 3)" class="property-card">
          <div class="property-image">
            <img [src]="property.images.split(',')[0] || 'assets/images/default-property.png'" alt="{{ property.name }}">
          </div>
          <div class="property-details">
            <h3>{{ property.name }}</h3>
            <p><strong>Location:</strong> {{ property.location }}</p>
            <p><strong>Price:</strong> {{ property.price }}</p>
            <p><strong>Type:</strong> {{ property.type }}</p>
            <a [routerLink]="['/properties', property.id]" class="btn btn-secondary">View Details</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Matches Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>My Matches</h2>
      <a routerLink="/renter/matches" class="btn btn-primary">View All Matches</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.matches" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading matches...</p>
      </div>

      <div *ngIf="error.matches" class="error-message">
        {{ error.matches }}
      </div>

      <div *ngIf="!loading.matches && !error.matches" class="cards-container">
        <div *ngIf="matches.length === 0" class="empty-state">
          <p>No matches yet. Start swiping to find your perfect match!</p>
        </div>

        <div *ngFor="let match of matches.slice(0, 3)" class="match-card">
          <div class="match-details">
            <h3 *ngIf="match.host">{{ match.host.firstName }} {{ match.host.lastName }}</h3>
            <h3 *ngIf="match.property">{{ match.property.name }}</h3>
            <p><strong>Matched on:</strong> {{ match.createdAt | date }}</p>
            <a *ngIf="match.host" [routerLink]="['/rooms', match.property?.id]" class="btn btn-secondary">View Details</a>
            <a *ngIf="match.property" [routerLink]="['/properties', match.property.id]" class="btn btn-secondary">View Details</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Visit Requests Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>My Visit Requests</h2>
      <a routerLink="/renter/visits" class="btn btn-primary">Manage Visits</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.visits" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading visit requests...</p>
      </div>

      <div *ngIf="error.visits" class="error-message">
        {{ error.visits }}
      </div>

      <div *ngIf="!loading.visits && !error.visits" class="cards-container">
        <div *ngIf="visitRequests.length === 0" class="empty-state">
          <p>No visit requests yet. Schedule a visit to a property or room!</p>
        </div>

        <div *ngFor="let visit of visitRequests.slice(0, 3)" class="visit-card">
          <div class="visit-details">
            <h3 *ngIf="visit.property">{{ visit.property.name }}</h3>
            <h3 *ngIf="visit.roommateHost">{{ visit.roommateHost.user.firstName }}'s Room</h3>
            <p><strong>Date:</strong> {{ visit.requestDate | date }}</p>
            <p><strong>Time:</strong> {{ visit.requestTime }}</p>
            <p><strong>Status:</strong> <span [ngClass]="'status-' + visit.status.toLowerCase()">{{ visit.status }}</span></p>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
