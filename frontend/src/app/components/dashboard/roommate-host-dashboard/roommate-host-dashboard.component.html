<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="logo">
      <h1>RentMate - Roommate Host Dashboard</h1>
    </div>
    <div class="user-info" *ngIf="user">
      <span>Welcome, {{ user.firstName }} {{ user.lastName }}</span>
      <button class="btn btn-outline" (click)="logout()">Logout</button>
    </div>
  </header>

  <div class="dashboard-content">
    <div class="sidebar">
      <div class="user-roles" *ngIf="user && user.roles">
        <h3>Your Roles</h3>
        <ul class="roles-list">
          <li *ngFor="let role of user.roles" class="role-badge">{{ role }}</li>
        </ul>
      </div>

      <nav class="dashboard-nav">
        <h3>Navigation</h3>
        <ul>
          <li><a routerLink="/roommate-host-dashboard" class="active">Dashboard</a></li>
          <li><a routerLink="/room-listings">My Room Listings</a></li>
          <li><a routerLink="/browse-renters">Browse Renters</a></li>
          <li><a routerLink="/matches">My Matches</a></li>
          <li><a routerLink="/messages">Messages</a></li>
          <li><a routerLink="/visits">Visits & Meetups</a></li>
          <li><a routerLink="/profile">My Profile</a></li>
        </ul>
      </nav>

      <div class="sidebar-cta">
        <button class="btn btn-primary btn-block" (click)="setActiveSection('create-listing')">
          <i class="fas fa-plus"></i> Add Room Listing
        </button>
      </div>
    </div>

    <main class="main-content">
      <!-- Dashboard Overview -->
      <div class="dashboard-overview">
        <div class="welcome-banner">
          <div class="welcome-content">
            <h2>Welcome to Your Roommate Host Dashboard</h2>
            <p>Find compatible roommates, manage your room listings, and coordinate meetups all in one place.</p>
          </div>
          <div class="welcome-actions">
            <button class="btn btn-primary" (click)="setActiveSection('create-listing')">
              <i class="fas fa-plus"></i> Add Room Listing
            </button>
            <button class="btn btn-secondary" (click)="setActiveSection('profile')">
              <i class="fas fa-user-edit"></i> Complete Your Profile
            </button>
          </div>
        </div>

        <div class="stats-cards">
          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-door-open"></i></div>
            <div class="stat-info">
              <h3>0</h3>
              <p>Active Room Listings</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-eye"></i></div>
            <div class="stat-info">
              <h3>0</h3>
              <p>Profile Views</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-handshake"></i></div>
            <div class="stat-info">
              <h3>0</h3>
              <p>Matches</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon"><i class="fas fa-calendar-check"></i></div>
            <div class="stat-info">
              <h3>0</h3>
              <p>Upcoming Visits</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Feature Sections -->
      <div class="dashboard-sections">
        <!-- Profile & Room Setup Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'profile'">
          <div class="section-header">
            <h2><i class="fas fa-user-circle"></i> Profile & Room Setup</h2>
          </div>

          <div class="profile-card">
            <div class="profile-header">
              <div class="profile-avatar">
                <img src="assets/placeholder-avatar.jpg" alt="Profile Avatar">
                <button class="btn btn-sm btn-secondary avatar-edit-btn">
                  <i class="fas fa-camera"></i>
                </button>
              </div>
              <div class="profile-info">
                <h3>{{ user?.firstName }} {{ user?.lastName }}</h3>
                <p><i class="fas fa-envelope"></i> {{ user?.email }}</p>
              </div>
            </div>

            <div class="profile-sections">
              <div class="profile-section">
                <h4>Personal Information</h4>
                <div class="form-group">
                  <label>Current City</label>
                  <input type="text" class="form-control" placeholder="Enter your current city" [(ngModel)]="profileModel.city" name="city">
                </div>
                <div class="form-group">
                  <label>Occupation</label>
                  <input type="text" class="form-control" placeholder="Enter your occupation" [(ngModel)]="profileModel.occupation" name="occupation">
                </div>
                <div class="form-group">
                  <label>Bio</label>
                  <textarea class="form-control" placeholder="Tell potential roommates about yourself" [(ngModel)]="profileModel.bio" name="bio"></textarea>
                </div>
              </div>

              <div class="profile-section">
                <h4>Roommate Preferences</h4>
                <div class="form-group">
                  <label>Gender Preference</label>
                  <select class="form-control" [(ngModel)]="profileModel.genderPreference" name="genderPreference">
                    <option>No Preference</option>
                    <option>Male Only</option>
                    <option>Female Only</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Smoking</label>
                  <select class="form-control" [(ngModel)]="profileModel.smoking" name="smoking">
                    <option>No Preference</option>
                    <option>Smoking Allowed</option>
                    <option>No Smoking</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Pets</label>
                  <select class="form-control" [(ngModel)]="profileModel.pets" name="pets">
                    <option>No Preference</option>
                    <option>Pets Allowed</option>
                    <option>No Pets</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="profile-actions">
              <button class="btn btn-primary" (click)="saveProfileChanges()" [disabled]="isLoading">
                <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                {{ isLoading ? 'Saving...' : 'Save Changes' }}
              </button>
              <button class="btn btn-secondary" (click)="setActiveSection('overview')" [disabled]="isLoading">Cancel</button>
            </div>

            <div *ngIf="errorMessage" class="alert alert-danger mt-3">
              {{ errorMessage }}
            </div>
          </div>
        </section>

        <!-- Create Room Listing Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'create-listing'">
          <div class="section-header">
            <h2><i class="fas fa-plus-circle"></i> Create Room Listing</h2>
          </div>

          <div class="listing-form-card">
            <div class="form-section">
              <h4>Room Details</h4>
              <div class="form-group">
                <label>Room Title</label>
                <input type="text" class="form-control" placeholder="E.g., Cozy Room in Downtown Apartment" [(ngModel)]="roomListingModel.name" name="name">
              </div>
              <div class="form-group">
                <label>Description</label>
                <textarea class="form-control" placeholder="Describe your room and living space" [(ngModel)]="roomListingModel.description" name="description"></textarea>
              </div>
              <div class="form-row">
                <div class="form-group half-width">
                  <label>Monthly Rent</label>
                  <input type="number" class="form-control" placeholder="Enter amount" [(ngModel)]="roomListingModel.price" name="price">
                </div>
                <div class="form-group half-width">
                  <label>Security Deposit</label>
                  <input type="number" class="form-control" placeholder="Enter amount" [(ngModel)]="roomListingModel.securityDeposit" name="securityDeposit">
                </div>
              </div>
              <div class="form-group">
                <label>Location</label>
                <input type="text" class="form-control" placeholder="Enter address" [(ngModel)]="roomListingModel.location" name="location">
              </div>
              <div class="form-group">
                <label>Available From</label>
                <input type="date" class="form-control" [(ngModel)]="roomListingModel.availableFrom" name="availableFrom">
              </div>
            </div>

            <div class="form-section">
              <h4>Room Photos</h4>
              <div class="photo-upload-area">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Drag and drop photos here or click to upload</p>
                <button class="btn btn-secondary">Select Photos</button>
              </div>
            </div>

            <div class="form-section">
              <h4>House Rules & Amenities</h4>
              <div class="form-group">
                <label>House Rules</label>
                <textarea class="form-control" placeholder="List your house rules" [(ngModel)]="roomListingModel.propertyRules" name="propertyRules"></textarea>
              </div>
              <div class="form-group">
                <label>Amenities</label>
                <div class="checkbox-group">
                  <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="roomListingModel.amenities.wifi" name="wifi"> WiFi
                  </label>
                  <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="roomListingModel.amenities.kitchen" name="kitchen"> Kitchen
                  </label>
                  <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="roomListingModel.amenities.laundry" name="laundry"> Laundry
                  </label>
                  <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="roomListingModel.amenities.parking" name="parking"> Parking
                  </label>
                  <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="roomListingModel.amenities.privateBathroom" name="privateBathroom"> Private Bathroom
                  </label>
                  <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="roomListingModel.amenities.airConditioning" name="airConditioning"> Air Conditioning
                  </label>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button class="btn btn-primary" (click)="createRoomListing(roomListingModel)" [disabled]="isLoading">
                <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                {{ isLoading ? 'Creating...' : 'Create Listing' }}
              </button>
              <button class="btn btn-secondary" (click)="saveAsDraft(roomListingModel)" [disabled]="isLoading">
                {{ isLoading ? 'Saving...' : 'Save as Draft' }}
              </button>
            </div>
            <div *ngIf="errorMessage" class="alert alert-danger mt-3">
              {{ errorMessage }}
            </div>
          </div>
        </section>

        <!-- My Room Listings Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'listings'">
          <div class="section-header">
            <h2><i class="fas fa-list"></i> My Room Listings</h2>
            <div class="section-actions">
              <button class="btn btn-primary" (click)="setActiveSection('create-listing')">
                <i class="fas fa-plus"></i> Add Listing
              </button>
            </div>
          </div>

          <div class="no-data">
            <p>You haven't created any room listings yet.</p>
            <button class="btn btn-primary" (click)="setActiveSection('create-listing')">Create Your First Listing</button>
          </div>
        </section>

        <!-- Browse Renters Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'browse'">
          <div class="section-header">
            <h2><i class="fas fa-search"></i> Browse Potential Roommates</h2>
            <div class="section-actions">
              <button class="btn btn-sm btn-outline">
                <i class="fas fa-filter"></i> Filter
              </button>
            </div>
          </div>

          <div class="no-data">
            <p>Roommate browsing feature coming soon! You'll be able to view profiles of potential roommates interested in shared living.</p>
          </div>
        </section>

        <!-- Matches Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'matches'">
          <div class="section-header">
            <h2><i class="fas fa-handshake"></i> My Matches</h2>
          </div>

          <div class="no-data">
            <p>You don't have any matches yet. Matches will appear here when renters express interest in your room listings.</p>
          </div>
        </section>

        <!-- Messages Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'messages'">
          <div class="section-header">
            <h2><i class="fas fa-comments"></i> Messages</h2>
          </div>

          <div class="no-data">
            <p>You don't have any messages yet. Messages will appear here once you match with potential roommates.</p>
          </div>
        </section>

        <!-- Visits Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'visits'">
          <div class="section-header">
            <h2><i class="fas fa-calendar-alt"></i> Visits & Meetups</h2>
          </div>

          <div class="no-data">
            <p>You don't have any scheduled visits or meetups yet. When potential roommates request to visit your place, they'll appear here.</p>
          </div>
        </section>

        <!-- Reviews Section -->
        <section class="dashboard-section" [class.active]="activeSection === 'reviews'">
          <div class="section-header">
            <h2><i class="fas fa-star"></i> Feedback & Reputation</h2>
          </div>

          <div class="no-data">
            <p>You don't have any reviews yet. Reviews from roommates will appear here after they move in or interact with you.</p>
          </div>
        </section>
      </div>
    </main>
  </div>
</div>
