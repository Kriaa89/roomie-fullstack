<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Roommate Host Dashboard</h1>
    <p *ngIf="currentUser">Welcome, {{ currentUser.firstName }} {{ currentUser.lastName }}</p>
  </div>

  <!-- User Profile Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>My Profile</h2>
      <a routerLink="/host/profile" class="btn btn-primary">Edit Profile</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.user || loading.profile" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading profile...</p>
      </div>

      <div *ngIf="error.user || error.profile" class="error-message">
        {{ error.user || error.profile }}
      </div>

      <div *ngIf="!loading.user && !loading.profile && !error.user && !error.profile && currentUser && hostProfile" class="profile-card">
        <div class="profile-image">
          <img [src]="hostProfile.profilePicture || 'assets/images/default-profile.png'" alt="Profile Picture">
        </div>
        <div class="profile-details">
          <h3>{{ currentUser.firstName }} {{ currentUser.lastName }}</h3>
          <p><strong>Email:</strong> {{ currentUser.email }}</p>
          <p><strong>Phone:</strong> {{ currentUser.phoneNumber }}</p>
          <p><strong>Location:</strong> {{ hostProfile.city }}</p>
          <p><strong>Bio:</strong> {{ hostProfile.bio }}</p>

          <div class="skills-section">
            <h4>Skills Offered:</h4>
            <div class="skills-list">
              <span *ngFor="let skill of hostProfile.skillsOffered" class="skill-tag">{{ skill }}</span>
            </div>
          </div>

          <div class="lifestyle-section">
            <h4>Lifestyle Preferences:</h4>
            <div class="lifestyle-list">
              <span *ngFor="let preference of hostProfile.lifestylePreferences" class="lifestyle-tag">{{ preference }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- My Rooms Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>My Rooms</h2>
      <a routerLink="/host/rooms/new" class="btn btn-primary">Add New Room</a>
    </div>

    <div class="section-content">
      <!-- This would be populated with room listings data -->
      <div class="empty-state">
        <p>You haven't listed any rooms yet. Add your first room to get started!</p>
      </div>
    </div>
  </section>

  <!-- Available Renters Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>Potential Renters</h2>
      <a routerLink="/host/renters" class="btn btn-primary">Find Renters</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.renters" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading potential renters...</p>
      </div>

      <div *ngIf="error.renters" class="error-message">
        {{ error.renters }}
      </div>

      <div *ngIf="!loading.renters && !error.renters" class="cards-container">
        <div *ngIf="availableRenters.length === 0" class="empty-state">
          <p>No potential renters available at the moment. Check back later!</p>
        </div>

        <div *ngFor="let renter of availableRenters.slice(0, 3)" class="renter-card">
          <div class="renter-image">
            <img [src]="renter.profilePicture || 'assets/images/default-profile.png'" alt="Renter Profile">
          </div>
          <div class="renter-details">
            <h3>{{ renter.user.firstName }} {{ renter.user.lastName }}</h3>
            <p><strong>Location:</strong> {{ renter.city }}</p>

            <div class="skills-section">
              <h4>Skills Expected:</h4>
              <div class="skills-list">
                <span *ngFor="let skill of renter.skillsExpected" class="skill-tag">{{ skill }}</span>
              </div>
            </div>

            <div class="lifestyle-section">
              <h4>Lifestyle Preferences:</h4>
              <div class="lifestyle-list">
                <span *ngFor="let preference of renter.lifestylePreferences" class="lifestyle-tag">{{ preference }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Matches Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>My Matches</h2>
      <a routerLink="/host/matches" class="btn btn-primary">View All Matches</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.matches" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading matches...</p>
      </div>

      <div *ngIf="error.matches" class="error-message">
        {{ error.matches }}
      </div>

      <div *ngIf="!loading.matches && !error.matches" class="cards-container">
        <div *ngIf="matches.length === 0" class="empty-state">
          <p>No matches yet. Start swiping to find your perfect roommate!</p>
        </div>

        <div *ngFor="let match of matches.slice(0, 3)" class="match-card">
          <div class="match-details">
            <h3>{{ match.renter.firstName }} {{ match.renter.lastName }}</h3>
            <p><strong>Matched on:</strong> {{ match.createdAt | date }}</p>
            <div class="match-actions">
              <a [routerLink]="['/host/matches', match.id]" class="btn btn-secondary">View Details</a>
              <a [routerLink]="['/host/visits/new']" [queryParams]="{renterId: match.renter.id}" class="btn btn-secondary">Schedule Visit</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Visit Requests Section -->
  <section class="dashboard-section">
    <div class="section-header">
      <h2>Visit Requests</h2>
      <a routerLink="/host/visits" class="btn btn-primary">View All Requests</a>
    </div>

    <div class="section-content">
      <div *ngIf="loading.visits" class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading visit requests...</p>
      </div>

      <div *ngIf="error.visits" class="error-message">
        {{ error.visits }}
      </div>

      <div *ngIf="!loading.visits && !error.visits" class="cards-container">
        <div *ngIf="visitRequests.length === 0" class="empty-state">
          <p>No visit requests yet. When renters request to visit your rooms, they'll appear here.</p>
        </div>

        <div *ngFor="let visit of visitRequests" class="visit-card">
          <div class="visit-details">
            <h3>Visit Request from {{ visit.requester.firstName }}</h3>
            <p><strong>Date:</strong> {{ visit.requestDate | date }}</p>
            <p><strong>Time:</strong> {{ visit.requestTime }}</p>
            <p><strong>Message:</strong> {{ visit.message || 'No message provided' }}</p>
            <p><strong>Status:</strong> <span [ngClass]="'status-' + visit.status.toLowerCase()">{{ visit.status }}</span></p>

            <div *ngIf="visit.status === 'PENDING'" class="visit-actions">
              <button (click)="approveVisitRequest(visit.id)" class="btn btn-success">Approve</button>
              <button (click)="rejectVisitRequest(visit.id)" class="btn btn-danger">Reject</button>
            </div>

            <div *ngIf="visit.status !== 'PENDING'" class="visit-response">
              <p><strong>Response:</strong> {{ visit.responseMessage || 'No response provided' }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
