<div class="room-listing-container">
  <div class="listing-header">
    <h1>Available Rooms</h1>
    <div class="search-container">
      <input
        type="text"
        placeholder="Search rooms..."
        class="search-input"
        #searchInput
        (keyup.enter)="filterRooms(searchInput.value)"
      >
      <button class="search-button" (click)="filterRooms(searchInput.value)">Search</button>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading rooms...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Rooms Grid -->
  <div *ngIf="!loading && !error" class="rooms-grid">
    <div *ngIf="rooms.length === 0" class="empty-state">
      <p>No rooms found. Try adjusting your search criteria.</p>
    </div>

    <div *ngFor="let room of rooms" class="room-card">
      <div class="room-image">
        <img [src]="(room.photos && typeof room.photos === 'string') ? room.photos.split(',')[0] : 'assets/images/default-room.png'" alt="{{ room.title }}">
      </div>
      <div class="room-details">
        <h2>{{ room.title }}</h2>
        <p class="room-location">{{ room.city }}</p>
        <p class="room-price">{{ room.price }} <span class="price-period">per month</span></p>
        <div class="host-info">
          <span>Hosted by {{ room.hostName || 'Unknown Host' }}</span>
        </div>
        <p class="room-amenities" *ngIf="room.amenities && typeof room.amenities === 'string'">
          <span *ngFor="let amenity of room.amenities.split(',')" class="amenity-tag">{{ amenity }}</span>
        </p>
        <div class="room-actions">
          <a [routerLink]="['/rooms', room.id]" class="btn-view">View Details</a>
        </div>
      </div>
    </div>
  </div>
</div>
